---
format: gfm
---

<!-- README.md is generated from README.Qmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# targets-uahpc

<!-- badges: start -->
<!-- badges: end -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


This is a minimal example of a [`targets`](https://docs.ropensci.org/targets/) workflow that can be run on your computer or on the University of Arizona cluster computer through [Open on Demand](https://ood.hpc.arizona.edu/).  `targets` is an R package for workflow management that can save you time by automatically skipping code that doesn't need to be re-run when you make changes to your data or code.  It also makes parallelization relatively easy.

## Prerequisites:

- A UAz HPC account
- Some familiarity with R, RStudio, and the `targets` package
- A GitHub account

## To Use:

1.  Click the green "Use this template" button to make a copy into your own GitHub account

2.  In your copy of the template, click the green "Code" button and copy the URL ending in .git

3.  Open RStudio, click File > New Project...

4.  Select "Version Control" then "Git" and paste in the .git URL from step 2. Click "create project" to open the project.

5.  This project uses [`renv`](https://rstudio.github.io/renv/articles/renv.html) to manage R package dependencies. Run `renv::restore()` in the R console to install all needed packages.

6. Run `targets` workflow:
    
    To run the workflow, you can use `tar_make()` or you can run targets in parallel using `tar_make_clustermq()` where you supply the number of parallel workers with the `workers` argument.
    To examine the workflow, you can use `tar_visnetwork()` to see a graph somewhat like this:
    
```{r echo=FALSE, message=FALSE, warning=FALSE, results='asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(targets_only = FALSE),
  "```",
  sep = "\n"
)
#this should display correctly on GitHub, or code can be pasted into https://mermaid.live
```

   